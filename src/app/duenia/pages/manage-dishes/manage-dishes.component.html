<p>manage-dishes works!</p>





<!-- <side-bar></side-bar> -->
<main-menu></main-menu>
<div class="card flex justify-content-center">

  <p-dialog header="Header" [(visible)]="visible" [style]="{width: '450px'}" [modal]="true" class="p-fluid">

    <form (ngSubmit)="addDishe1()">
      <label for="nombre">Nombre del plato:</label>
      <input pInputText  required autofocus type="text" id="nombrePlatillo" [(ngModel)]="nuevoPlato1.nombrePlatillo" name="nombrePlatillo" required>



    <!-- <div class="field">
        <label for="status">Inventory Status</label>
        <p-dropdown [(ngModel)]="nuevoPlato.status" inputId="status" optionValue="label" [options]="status" placeholder="Select" name="status">
            <ng-template pTemplate="selectedItem">
                <span *ngIf="nuevoPlato && nuevoPlato.status" [class]="'product-badge status-' + nuevoPlato.status.toString().toLowerCase()">{{nuevoPlato.status}}</span>
            </ng-template>
            <ng-template let-option pTemplate="item">
                <span [class]="'product-badge status-' + option.value">{{option.label}}</span>
            </ng-template>
        </p-dropdown>
    </div> -->


    <div class="field">
      <label class="mb-3">Category</label>
      <div class="formgrid grid">
          <div class="field-radiobutton col-6">
              <p-radioButton id="categoriaID" name="categoriaID" value="1" [(ngModel)]="nuevoPlato1.categoriaID"></p-radioButton>
              <label for="category1">Mariscos</label>
          </div>
          <div class="field-radiobutton col-6">
              <p-radioButton id="category2" name="category" value="4" [(ngModel)]="nuevoPlato.categoria"></p-radioButton>
              <label for="category2">Entradas</label>
          </div>
          <div class="field-radiobutton col-6">
              <p-radioButton id="category3" name="category" value="3" [(ngModel)]="nuevoPlato.categoria"></p-radioButton>
              <label for="category3">Bebidas</label>
          </div>
          <div class="field-radiobutton col-6">
              <p-radioButton id="category4" name="category" value="5" [(ngModel)]="nuevoPlato.categoria"></p-radioButton>
              <label for="category4">Bebidas</label>
          </div>

      </div>
  </div>
      <button type="submit">Agregar Plato</button>
    </form>
  </p-dialog>
</div>


<div class="grid" >
  <div class="col-12" >
      <div class="card px-6 py-6">
          <p-toast></p-toast>
          <p-toolbar styleClass="mb-4" >
              <ng-template pTemplate="left">
                  <h1 style="color: black;">Gestionar Platillos</h1>
              </ng-template>
          </p-toolbar>

            <button (click)="showDialog()" pButton pRipple label="Nuevo" class="p-button-success" style="width: 130px;"></button>

          <p-table #dt [value]="dishes1" [columns]="cols" responsiveLayout="scroll" [rows]="10" [globalFilterFields]="['name','country.name','representative.name','status']" [paginator]="true" [rowsPerPageOptions]="[10,20,30]" [showCurrentPageReport]="true" selectionMode="multiple" [rowHover]="true" dataKey="id">
              <ng-template pTemplate="caption">
                  <div class="flex flex-column md:flex-row md:justify-content-between md:align-items-center">
                      <h5 class="m-0">Platillos</h5>
                  </div>
              </ng-template>
              <ng-template pTemplate="header">
                  <tr>
                      <th>Nombre <p-sortIcon field="name"></p-sortIcon></th>
                      <th>Categoria <p-sortIcon field="category"></p-sortIcon></th>
                      <!-- <th>Status <p-sortIcon field="inventoryStatus"></p-sortIcon></th> -->
                      <th>Acciones<p-sortIcon field="category"></p-sortIcon></th>
                  </tr>
              </ng-template>
              <ng-template pTemplate="body" let-dishe>
                  <tr>
                      <td >
                          <span class="p-column-title">Name</span>
                          {{dishe.nombrePlatillo}}
                      </td>

                      <td >
                          <span class="p-column-title">Category</span>
                          {{dishe.categoriaID}}
                      </td>
                      <!-- <td><span class="p-column-title">Status</span>
                          <span>{{dishe.status}}</span>
                      </td> -->
                      <td>
                          <div class="flex">
                              <button pButton pRipple icon="pi pi-pencil" class="p-button-rounded p-button-success mr-2" (click)="getOneDishe(dishe)"></button>
                              <button pButton pRipple icon="pi pi-trash" class="p-button-rounded p-button-warning" (click)="getOneDishetoDelete1(dishe)"></button>
                          </div>
                      </td>

                      <p-dialog [(visible)]="deleteProductDialog" header="Confirm" [modal]="true" [style]="{width:'450px'}">
                        <div class="flex align-items-center justify-content-center">
                            <i class="pi pi-exclamation-triangle mr-3" style="font-size: 2rem"></i>
                            <span *ngIf="selectedPlato">Estas seguro de eliminar el platillo <b>{{selectedPlato.nombre}}</b>?</span>
                        </div>
                        <ng-template pTemplate="footer">
                            <button pButton pRipple icon="pi pi-times" class="p-button-text" label="No" (click)="deleteProductDialog = false"></button>
                            <button pButton pRipple icon="pi pi-check" class="p-button-text" label="Si" (click)="deleteDishe1(selectedPlato1)"></button>
                        </ng-template>
                    </p-dialog>
                  </tr>


              </ng-template>


          </p-table>
      </div>

      <!-- Editar Platillo -->
      <p-dialog [(visible)]="productDialog" [style]="{width: '450px'}" header="Editar Platillo" [modal]="true" class="p-fluid">
          <ng-template pTemplate="content">


            <!-- ----- -->

            <div class="field">
              <label for="name">Name</label>
              <input type="text" pInputText id="name" [(ngModel)]="selectedPlato.nombre" required autofocus [ngClass]="{'ng-invalid ng-dirty' : submitted && !selectedPlato.nombre}" name="
              nombre"/>
              <small class="ng-dirty ng-invalid" *ngIf="submitted && !selectedPlato.nombre">Name is required.</small>
          </div>

          <div class="field">
              <label for="status">Inventory Status</label>
              <p-dropdown [(ngModel)]="selectedPlato.status" inputId="status" optionValue="label" [options]="status" placeholder="Select">
                  <ng-template pTemplate="selectedItem">
                      <span *ngIf="selectedPlato && selectedPlato.status" [class]="'product-badge status-' + selectedPlato.status.toString().toLowerCase()">{{selectedPlato.status}}</span>
                  </ng-template>
                  <ng-template let-option pTemplate="item">
                      <span [class]="'product-badge status-' + option.value">{{option.label}}</span>
                  </ng-template>
              </p-dropdown>
          </div>

          <div class="field">
              <label class="mb-3">Category</label>
              <div class="formgrid grid">
                  <div class="field-radiobutton col-6">
                      <p-radioButton id="category1" name="category" value="Arroces" [(ngModel)]="selectedPlato.categoria"></p-radioButton>
                      <label for="category1">Arroces</label>
                  </div>
                  <div class="field-radiobutton col-6">
                      <p-radioButton id="category2" name="category" value="Jaleas" [(ngModel)]="selectedPlato.categoria"></p-radioButton>
                      <label for="category2">Jaleas</label>
                  </div>
                  <div class="field-radiobutton col-6">
                      <p-radioButton id="category3" name="category" value="Mariscos" [(ngModel)]="selectedPlato.categoria"></p-radioButton>
                      <label for="category3">Mariscos</label>
                  </div>
                  <div class="field-radiobutton col-6">
                      <p-radioButton id="category4" name="category" value="Bebidas" [(ngModel)]="selectedPlato.categoria"></p-radioButton>
                      <label for="category4">Bebidas</label>
                  </div>

              </div>
          </div>
          </ng-template>

          <ng-template pTemplate="footer">
            <button pButton pRipple label="Cancel" icon="pi pi-times" class="p-button-text" (click)="this.productDialog =false"></button>
            <button pButton pRipple label="Save" icon="pi pi-check" class="p-button-text" (click)="updateDishe()"></button>
        </ng-template>
      </p-dialog>
  </div>
  <p-button routerLink="/duenia">volver al menu</p-button>
</div>




